From 6e06217c2662bae1baf7a4af5522dce9846edd2e Mon Sep 17 00:00:00 2001
From: Callum <38501234+calumari@users.noreply.github.com>
Date: Fri, 29 May 2020 15:01:59 +0100
Subject: [PATCH] Pigs return saddle

---
 src/main/java/net/minecraft/server/EntityPig.java    | 12 ++++++++++++
 .../conduit/config/ConduitWorldConfig.java           |  5 +++++
 2 files changed, 17 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EntityPig.java b/src/main/java/net/minecraft/server/EntityPig.java
index 8d277566e..0fa08cc8e 100644
--- a/src/main/java/net/minecraft/server/EntityPig.java
+++ b/src/main/java/net/minecraft/server/EntityPig.java
@@ -119,6 +119,18 @@ public class EntityPig extends EntityAnimal {
                 itemstack.a(entityhuman, (EntityLiving) this, enumhand);
                 return true;
             } else if (this.hasSaddle() && !this.isVehicle()) {
+                // Conduit start
+                if (world.conduitConfig.pigReturnSaddle && entityhuman.isSneaking()) {
+                    setSaddle(false);
+                    if (!entityhuman.abilities.canInstantlyBuild) {
+                        ItemStack saddle = new ItemStack(Items.SADDLE);
+                        if (!entityhuman.inventory.pickup(saddle)) {
+                            entityhuman.drop(saddle, false);
+                        }
+                    }
+                    return true;
+                }
+                // Conduit end
                 if (!this.world.isClientSide) {
                     entityhuman.startRiding(this);
                 }
diff --git a/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java b/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
index 5304d5422..46d880c83 100644
--- a/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
+++ b/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
@@ -88,4 +88,9 @@ public class ConduitWorldConfig {
         phantomMaxSize = getInt("mobs.phantom.max-size", 64);
         phantomSizeDamageMultiplier = getDouble("mobs.phantom.size-damage-multiplier", 0.1D);
     }
+
+    public boolean pigReturnSaddle;
+    private void pigSettings() {
+        pigReturnSaddle = getBoolean("mobs.pig.return-saddle", true);
+    }
 }
-- 
2.24.1.windows.2

