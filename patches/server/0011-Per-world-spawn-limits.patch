From b1c2d86e1e4d5de5ea2606d616dcd0215af457cc Mon Sep 17 00:00:00 2001
From: Callum <38501234+calumari@users.noreply.github.com>
Date: Mon, 8 Jun 2020 00:34:32 +0100
Subject: [PATCH] Per world spawn limits

---
 .../conduit/config/ConduitWorldConfig.java            | 11 +++++++++++
 src/main/java/org/bukkit/craftbukkit/CraftWorld.java  |  6 ++++++
 2 files changed, 17 insertions(+)

diff --git a/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java b/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
index 1b61ff015e..935592e008 100644
--- a/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
+++ b/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
@@ -78,4 +78,15 @@ public class ConduitWorldConfig {
     private void witherSettings() {
         witherPersistent = getBoolean("mobs.wither.persistent", false);
     }
+
+    public int monsterSpawn;
+    public int animalSpawn;
+    public int waterAnimalSpawn;
+    public int ambientSpawn;
+    private void spawnLimits() {
+        monsterSpawn = getInt("spawn-limits.monsters", -1);
+        animalSpawn = getInt("spawn-limits.animals", -1);
+        waterAnimalSpawn = getInt("spawn-limits.water-animals", -1);
+        ambientSpawn = getInt("spawn-limits.ambient", -1);
+    }
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/CraftWorld.java b/src/main/java/org/bukkit/craftbukkit/CraftWorld.java
index fb24b9d072..31081a7d45 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftWorld.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftWorld.java
@@ -335,6 +335,12 @@ public class CraftWorld implements World {
         this.generator = gen;
 
         environment = env;
+        // Conduit start - per world spawn limits
+        monsterSpawn = world.conduitConfig.monsterSpawn;
+        animalSpawn = world.conduitConfig.animalSpawn;
+        waterAnimalSpawn = world.conduitConfig.waterAnimalSpawn;
+        ambientSpawn = world.conduitConfig.ambientSpawn;
+        // Conduit end
     }
 
     @Override
-- 
2.24.1.windows.2

