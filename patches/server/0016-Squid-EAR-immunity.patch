From 9b5fb8ac04fd26a1632b449173d344e69e0b94d6 Mon Sep 17 00:00:00 2001
From: Callum <38501234+calumari@users.noreply.github.com>
Date: Thu, 16 Jul 2020 04:06:13 +0100
Subject: [PATCH] Squid EAR immunity

---
 .../socialhangover/conduit/config/ConduitWorldConfig.java    | 5 +++++
 src/main/java/org/spigotmc/ActivationRange.java              | 1 +
 2 files changed, 6 insertions(+)

diff --git a/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java b/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
index 4fd786b030..6bd4f5b1c1 100644
--- a/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
+++ b/src/main/java/net/socialhangover/conduit/config/ConduitWorldConfig.java
@@ -98,4 +98,9 @@ public class ConduitWorldConfig {
         waterAnimalSpawn = getInt("spawn-limits.water-animals", -1);
         ambientSpawn = getInt("spawn-limits.ambient", -1);
     }
+
+    public boolean squidEntityActivationRangeImmunity;
+    private void squidSettings() {
+        squidEntityActivationRangeImmunity = getBoolean("mobs.squid.entity-activation-range-immunity", false);
+    }
 }
diff --git a/src/main/java/org/spigotmc/ActivationRange.java b/src/main/java/org/spigotmc/ActivationRange.java
index 828621c857..1504be1a16 100644
--- a/src/main/java/org/spigotmc/ActivationRange.java
+++ b/src/main/java/org/spigotmc/ActivationRange.java
@@ -378,6 +378,7 @@ public class ActivationRange
      */
     public static boolean checkIfActive(Entity entity)
     {
+        if (entity.world.conduitConfig.squidEntityActivationRangeImmunity && entity instanceof net.minecraft.server.EntitySquid) return true; // Conduit
         // Never safe to skip fireworks or entities not yet added to chunk
         if ( !entity.inChunk || entity instanceof EntityFireworks ) {
             return true;
-- 
2.24.1.windows.2

