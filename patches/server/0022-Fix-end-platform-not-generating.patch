From 14144b49dfdd432ee3dc1bd4f220d8c821c6c436 Mon Sep 17 00:00:00 2001
From: Callum <38501234+calumari@users.noreply.github.com>
Date: Thu, 20 Aug 2020 03:06:12 +0100
Subject: [PATCH] Fix end platform not generating

---
 src/main/java/net/minecraft/server/EntityPlayer.java | 1 +
 src/main/java/net/minecraft/server/WorldServer.java  | 1 +
 2 files changed, 2 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EntityPlayer.java b/src/main/java/net/minecraft/server/EntityPlayer.java
index b9c20d11f4..3129f848cd 100644
--- a/src/main/java/net/minecraft/server/EntityPlayer.java
+++ b/src/main/java/net/minecraft/server/EntityPlayer.java
@@ -997,6 +997,7 @@ public class EntityPlayer extends EntityHuman implements ICrafting {
         if (event.isCancelled() || event.getTo() == null || event.getTo().getWorld() == null) {
             return null;
         }
+        if (exitWorldServer.getTypeKey() == DimensionManager.THE_END && event.getCanCreatePortal()) { WorldServer.makeObsidianPlatform(exitWorldServer, entity); } // Conduit
         return new CraftPortalEvent(event);
     }
     // CraftBukkit end
diff --git a/src/main/java/net/minecraft/server/WorldServer.java b/src/main/java/net/minecraft/server/WorldServer.java
index 5ade595ea1..278e9ff533 100644
--- a/src/main/java/net/minecraft/server/WorldServer.java
+++ b/src/main/java/net/minecraft/server/WorldServer.java
@@ -2192,6 +2192,7 @@ public class WorldServer extends World implements GeneratorAccessSeed {
         WorldServer.a(worldserver, null);
     }
 
+    public static void makeObsidianPlatform(WorldServer worldserver, Entity entity) { a(worldserver, entity); } // Conduit - OBFHELPER
     public static void a(WorldServer worldserver, Entity entity) {
         // CraftBukkit end
         BlockPosition blockposition = WorldServer.a;
-- 
2.28.0.windows.1

